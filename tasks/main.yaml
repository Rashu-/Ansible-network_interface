---

- name: Check network device OS
  assert:
    that: >
      ansible_network_os == 'nxos' or
      ansible_network_os == 'ios'
    msg: "Network device OS not defined or not supported by this role: {{ ansible_network_os }}"

- include_tasks: nxos_inner.yaml
  loop: "{{ interfaces | dict2items }}"
  loop_control:
    loop_var: outer_item
  when: >
    ansible_network_os == 'nxos' and
    interfaces is defined
  tags:
    - interface_config
    - nxos
